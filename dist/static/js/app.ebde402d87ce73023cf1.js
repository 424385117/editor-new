webpackJsonp([1],{"2ZrH":function(t,e){},"5W1q":function(t,e){},BVnA:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),a=n("zL8q"),s=n.n(a),o=(n("tvR6"),n("5W1q"),n("X6nt"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]});var r=n("VU/8")({name:"App"},o,!1,function(t){n("XPM2")},null,null).exports,l=n("/ocq"),c={data:function(){return{range:null,title:"New document",content:"<p><br></p>",link:{text:"链接",url:"",isUrl:!1,show:!1},img:{show:!1,isLink:!1,isImgLink:!1}}},mounted:function(){var t=this;this.$nextTick(function(){t.$refs.editor.focus()})},methods:{focus:function(){this.range=window.getSelection().rangeCount&&window.getSelection().getRangeAt(0)},mouseup:function(){this.range=window.getSelection().getRangeAt(0)},keyup:function(){this.range=window.getSelection().getRangeAt(0)},change:function(){var t=this.$refs.editor.innerHTML;""==t&&(this.$refs.editor.innerHTML="<p><br></p>"),this.content=t,this.range=window.getSelection().getRangeAt(0)},enter:function(t){document.execCommand("formatBlock",!1,"P");var e=this.range.commonAncestorContainer;if("editor"==e.className)return!1;for(;"P"!=e.tagName;)e=e.parentNode;e.removeAttribute("style"),e.removeAttribute("class"),e.children[0]&&"B"==e.children[0].tagName&&(e.innerHTML=e.innerText),e.children[0]&&"I"==e.children[0].tagName&&(e.innerHTML=e.innerText),e.children[0]&&"U"==e.children[0].tagName&&(e.innerHTML=e.innerText),e.children[0]&&"STRIKE"==e.children[0].tagName&&(e.innerHTML=e.innerText)},showLink:function(){this.range&&(this.link.text=this.range.toString()||"链接",this.range.commonAncestorContainer.parentNode.href?(this.link.href="",this.$refs.url.value="",this.link.isUrl=!1,this.range.collapsed||(this.link.href=this.range.commonAncestorContainer.parentNode.href,this.$refs.url.value=this.link.href,this.link.isUrl=!0)):(this.link.href="",this.$refs.url.value="",this.link.isUrl=!1))},urlInput:function(t){this.link.isUrl=/^http(s)?:\/\/(.*)?$/.test(t.target.value)},insertLink:function(){if(!this.range)return!1;if(this.link.url=this.$refs.url.value,!/^http(s)?:\/\/(.*)?$/.test(this.link.url))return this.$message.error("请输入链接"),!1;var t=document.createElement("a");t.setAttribute("href",this.link.url),t.appendChild(document.createTextNode(this.link.text)),this.range.deleteContents(),this.range.insertNode(t),this.link.show=!1},unLinkClick:function(){document.execCommand("unlink",!1,null)},showImg:function(){this.img.isLink=!1,this.$refs.img.value="",this.img.isImgLink=!1},imgLinkInput:function(t){this.img.isImgLink=/^http(s)?:\/\/(.*)?$/.test(t.target.value)},insertImg:function(){if(this.range){var t=this.range.commonAncestorContainer;if("editor"==t.className)return!1;for(;"editor"!=t.parentNode.className;)t=t.parentNode;if("H1"==t.tagName)return this.$message.error("标题不支持插入图片"),!1;if("BLOCKQUOTE"==t.tagName)return this.$message.error("引用不支持插入图片"),!1;var e=this.$refs.img.value;if(!/^http(s)?:\/\/(.*)$/.test(e))return this.$message.error("请图片链接"),!1;var n=document.createElement("img");n.setAttribute("src",e),this.range.deleteContents(),this.range.insertNode(n),this.img.show=!1}},changeFile:function(t){if(this.$refs.imgfile.value="",!this.range)return!1;var e=this.range.commonAncestorContainer;if("editor"==e.className)return!1;for(;"editor"!=e.parentNode.className;)e=e.parentNode;if("H1"==e.tagName)return this.$message.error("标题不支持插入图片"),!1;if("BLOCKQUOTE"==e.tagName)return this.$message.error("引用不支持插入图片"),!1;var n=document.createElement("img");n.setAttribute("src","http://video.yingtu.co/8/image/288559ae-3365-4130-b9dc-b7a5ef187dea.jpg"),this.range.deleteContents(),this.range.insertNode(n),this.img.show=!1},headingClick:function(){var t=document.queryCommandValue("formatBlock");"h1"==t&&document.execCommand("formatBlock",!1,"P"),"p"==t&&document.execCommand("formatBlock",!1,"H1")},quoteClick:function(){var t=document.queryCommandValue("formatBlock");"blockquote"==t&&document.execCommand("formatBlock",!1,"P"),"p"==t&&document.execCommand("formatBlock",!1,"BLOCKQUOTE")},fontClick:function(t){document.execCommand(t,!1,null)},alignClick:function(t){document.execCommand(t,!1,null)},dentClick:function(t){var e=this.range.commonAncestorContainer;if("editor"==e.className)return!1;for(;"P"!=e.tagName;)e=e.parentNode;"indent"==t?e.setAttribute("class",t):e.removeAttribute("class")},blurEditor:function(){this.range=window.getSelection().getRangeAt(0)},paste:function(t){t.preventDefault(),t.stopPropagation();var e=t.clipboardData||window.clipboardData,n=e.getData("text/html");e.getData("text/plain");n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/<meta.+?>/g,"")).replace(/<script.+?>/g,"")).replace(/<link.+?>/g,"")).replace(/style=".+?"/g,"")).replace(/class=".+?"/g,"")).replace(/\n|\r/g,"")).replace(/data-click="{.+?}"/g,"")).replace(/<h[2|3|4|5|6].+?>/g,"<p>")).replace(/<\/h[2|3|4|5|6]>/g,"</p>")).replace(/<div.+?>/g,"<p>")).replace(/<\/div>/g,"</p>")).replace(/<span.+?>/g,"")).replace(/<\/span>/g,"")).replace(/<em.+?>/g,"")).replace(/<\/em>/g,"")).replace(/<button.+?>/g,"")).replace(/<\/button>/g,"")).replace(/<svg>.+?<\/svg>/g,"")).replace(/<table.+?>/g,"")).replace(/<\/table>/g,"")).replace(/<thead.+?>/g,"")).replace(/<\/thead>/g,"")).replace(/<tbody.+?>/g,"")).replace(/<\/tbody>/g,"")).replace(/<tr.+?>/g,"")).replace(/<\/tr>/g,"")).replace(/<td.+?>/g,"")).replace(/<\/td>/g,""),document.execCommand("insertHTML",!1,n)}}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-main"},[n("el-popover",{ref:"popover-link",attrs:{placement:"bottom",width:"200",trigger:"click"},on:{show:t.showLink},model:{value:t.link.show,callback:function(e){t.$set(t.link,"show",e)},expression:"link.show"}},[n("div",{staticClass:"link-wrap"},[n("div",{staticClass:"link-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.link.text,expression:"link.text"}],staticClass:"input",domProps:{value:t.link.text},on:{input:function(e){e.target.composing||t.$set(t.link,"text",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"link-item",staticStyle:{"margin-top":"10px"}},[n("input",{ref:"url",staticClass:"input",attrs:{placeholder:"链接地址"},on:{input:t.urlInput}})]),t._v(" "),n("div",{staticClass:"link-item",staticStyle:{"margin-top":"10px"}},[n("button",{staticClass:"button button-primary button-min",attrs:{disabled:!t.link.isUrl},on:{click:t.insertLink}},[t._v("确认")]),t._v(" "),n("button",{staticClass:"button button-min",on:{click:function(e){t.link.show=!1}}},[t._v("取消")])])])]),t._v(" "),n("el-popover",{ref:"popover-img",attrs:{placement:"bottom",width:"200",trigger:"click"},on:{show:t.showImg},model:{value:t.img.show,callback:function(e){t.$set(t.img,"show",e)},expression:"img.show"}},[n("div",{staticClass:"img-wrap"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.img.isLink,expression:"!img.isLink"}],staticClass:"img-item"},[n("div",{staticClass:"btn-upload"},[n("span",[t._v("上传图片")]),t._v(" "),n("input",{ref:"imgfile",attrs:{type:"file",accept:"image/png,image/jpg,image/jpeg"},on:{change:t.changeFile}})])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.img.isLink,expression:"!img.isLink"}],staticClass:"img-item",staticStyle:{"margin-top":"10px"}},[n("button",{staticClass:"button button-full",on:{click:function(e){t.img.isLink=!0}}},[t._v("网络图片")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.img.isLink,expression:"img.isLink"}],staticClass:"img-item"},[n("input",{ref:"img",staticClass:"input",attrs:{placeholder:"图片地址"},on:{input:t.imgLinkInput}})]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.img.isLink,expression:"img.isLink"}],staticClass:"img-item",staticStyle:{"margin-top":"10px"}},[n("button",{staticClass:"button button-primary button-min",attrs:{disabled:!t.img.isImgLink},on:{click:t.insertImg}},[t._v("确认")]),t._v(" "),n("button",{staticClass:"button button-min",on:{click:function(e){t.img.isLink=!1}}},[t._v("取消")])])])]),t._v(" "),n("div",{staticClass:"top"},[n("div",{staticClass:"left"},[n("div",{staticClass:"tools"},[n("div",{staticClass:"tools-group"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"标题和正文",placement:"bottom"}},[n("button",{staticClass:"tool-btn",attrs:{type:"button"},on:{click:t.headingClick}},[n("i",{staticClass:"fa fa-header"})])]),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"粗体",placement:"bottom"}},[n("button",{staticClass:"tool-btn",attrs:{type:"button"},on:{click:function(e){t.fontClick("bold")}}},[n("i",{staticClass:"fa fa-bold"})])]),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"斜体",placement:"bottom"}},[n("button",{staticClass:"tool-btn",attrs:{type:"button"},on:{click:function(e){t.fontClick("italic")}}},[n("i",{staticClass:"fa fa-italic"})])]),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下划线",placement:"bottom"}},[n("button",{staticClass:"tool-btn",attrs:{type:"button"},on:{click:function(e){t.fontClick("underline")}}},[n("i",{staticClass:"fa fa-underline"})])]),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除线",placement:"bottom"}},[n("button",{staticClass:"tool-btn",attrs:{type:"button"},on:{click:function(e){t.fontClick("strikethrough")}}},[n("i",{staticClass:"fa fa-strikethrough"})])])],1),t._v(" "),n("div",{staticClass:"tools-group"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"插入链接",placement:"bottom"}},[n("button",{directives:[{name:"popover",rawName:"v-popover:popover-link",arg:"popover-link"}],staticClass:"tool-btn",attrs:{type:"button"}},[n("i",{staticClass:"fa fa-link"})])]),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"取消链接",placement:"bottom"}},[n("button",{staticClass:"tool-btn",attrs:{type:"button"},on:{click:t.unLinkClick}},[n("i",{staticClass:"fa fa-chain-broken"})])]),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"插入图片",placement:"bottom"}},[n("button",{directives:[{name:"popover",rawName:"v-popover:popover-img",arg:"popover-img"}],staticClass:"tool-btn",attrs:{type:"button"}},[n("i",{staticClass:"fa fa-picture-o"})])]),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"插入引用",placement:"bottom"}},[n("button",{staticClass:"tool-btn",attrs:{type:"button"},on:{click:t.quoteClick}},[n("i",{staticClass:"fa  fa-quote-left"})])])],1),t._v(" "),n("div",{staticClass:"tools-group"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"左对齐",placement:"bottom"}},[n("button",{staticClass:"tool-btn",attrs:{type:"button"},on:{click:function(e){t.alignClick("justifyLeft")}}},[n("i",{staticClass:"fa fa-align-left"})])]),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"居中对齐",placement:"bottom"}},[n("button",{staticClass:"tool-btn",attrs:{type:"button"},on:{click:function(e){t.alignClick("justifyCenter")}}},[n("i",{staticClass:"fa fa-align-center"})])]),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"右对齐",placement:"bottom"}},[n("button",{staticClass:"tool-btn",attrs:{type:"button"},on:{click:function(e){t.alignClick("justifyRight")}}},[n("i",{staticClass:"fa fa-align-right"})])]),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"两端对齐",placement:"bottom"}},[n("button",{staticClass:"tool-btn",attrs:{type:"button"},on:{click:function(e){t.alignClick("justifyFull")}}},[n("i",{staticClass:"fa fa-align-justify"})])])],1),t._v(" "),n("div",{staticClass:"tools-group"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"文本缩进",placement:"bottom"}},[n("button",{staticClass:"tool-btn",attrs:{type:"button"},on:{click:function(e){t.dentClick("indent")}}},[n("i",{staticClass:"fa fa-indent"})])]),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"取消缩进",placement:"bottom"}},[n("button",{staticClass:"tool-btn",attrs:{type:"button"},on:{click:function(e){t.dentClick("outdent")}}},[n("i",{staticClass:"fa fa-outdent"})])])],1)])]),t._v(" "),t._m(0)]),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"title"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),n("div",{ref:"editor",staticClass:"editor",attrs:{contenteditable:"true"},on:{blur:t.blurEditor,keyup:[t.keyup,function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.enter(e):null}],input:t.change,paste:t.paste,focus:t.focus,mouseup:t.mouseup}},[t._m(1)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"right"},[e("button",{staticClass:"button button-primary",attrs:{type:"button"}},[e("i",{staticClass:"fa fa-paper-plane"}),this._v(" 发布")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("br")])}]};var m=n("VU/8")(c,u,!1,function(t){n("BVnA"),n("W5SM")},"data-v-79bf1bcf",null).exports,p={props:{value:{type:String,default:"<p><br></p>"}},data:function(){return{range:null,selection:null}},mounted:function(){this.$refs.editor.innerHTML=this.value},methods:{blur:function(t){this.selection=window.getSelection(),this.selection.rangeCount>0&&(this.range=window.getSelection().getRangeAt(0))},focus:function(t){console.log(this.range)},enter:function(t){document.execCommand("formatBlock",!1,"P")},input:function(t){var e=t.target.innerHTML;""===e&&(t.target.innerHTML="<p><br></p>",e="<p><br></p>"),"<p><br></p>"===e?this.$emit("input",""):this.$emit("input",e)},headingClick:function(t){console.log(window.getSelection())}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"zss-editor"},[n("div",{staticClass:"zss-editor-header"},[n("button",{staticClass:"zss-editor-button",attrs:{type:"button"},on:{click:t.headingClick}},[n("i",{staticClass:"fa fa-header"})])]),t._v(" "),n("div",{ref:"editor",staticClass:"zss-editor-body",attrs:{contenteditable:"true"},on:{input:t.input,blur:t.blur,keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.enter(e):null},focus:t.focus}})])},staticRenderFns:[]};var d={components:{Editor:n("VU/8")(p,f,!1,function(t){n("gKSS"),n("WUba")},"data-v-69364ffe",null).exports},data:function(){return{html:"<p>哈哈哈</p>"}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"demo"},[n("div",{staticClass:"editor-warp"},[n("editor",{model:{value:t.html,callback:function(e){t.html=e},expression:"html"}})],1)])},staticRenderFns:[]};var h=n("VU/8")(d,g,!1,function(t){n("2ZrH")},"data-v-e0ad75fe",null).exports;i.default.use(l.a);var v=new l.a({routes:[{path:"/",name:"main",component:m},{path:"/demo",name:"demo",component:h}]});i.default.use(s.a),i.default.config.productionTip=!1,new i.default({el:"#app",router:v,components:{App:r},template:"<App/>"})},W5SM:function(t,e){},WUba:function(t,e){},X6nt:function(t,e){},XPM2:function(t,e){},gKSS:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ebde402d87ce73023cf1.js.map